<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>clima</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">clima</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-breadcrumbs>
      <ion-breadcrumb href="#home">Home</ion-breadcrumb>
      <ion-breadcrumb href="#clima">Clima</ion-breadcrumb>
  </ion-breadcrumbs>

  <ion-card>
    <ion-card-header>
      <ion-card-title>Dashboard del Clima</ion-card-title>
      <ion-card-subtitle>Condiciones actuales por ciudad en Chile</ion-card-subtitle>
    </ion-card-header>
    <ion-card-content>
      <ion-item>
        <ion-label>Unidad de Temperatura</ion-label>
        <ion-toggle [(ngModel)]="esCelsius" (ionChange)="actualizarTemperatura()">Celsius</ion-toggle>
      </ion-item>
      <ion-segment [(ngModel)]="ciudadSeleccionada" (ionChange)="actualizarClima()">
        <ion-segment-button value="Santiago">
          <ion-label>Santiago</ion-label>
        </ion-segment-button>
        <ion-segment-button value="Valparaíso">
          <ion-label>Valparaíso</ion-label>
        </ion-segment-button>
        <ion-segment-button value="Concepción">
          <ion-label>Concepción</ion-label>
        </ion-segment-button>
      </ion-segment>
      <ion-grid>
        <ion-row>
          <ion-col size="12" *ngIf="datosClima">
            <ion-card>
              <ion-card-header>
                <ion-card-title>{{ datosClima.ciudad }}</ion-card-title>
              </ion-card-header>
              <ion-card-content>
                <p>Temperatura: {{ datosClima.temperatura | number:'1.1-1' }} {{ esCelsius ? '°C' : '°F' }}</p>
                <p>Condición: {{ datosClima.condicion }}</p>
                <p>Humedad: {{ datosClima.humedad }}%</p>
                <p>Viento: {{ datosClima.viento }} km/h</p>
                <p>Probabilidad de Lluvia: {{ datosClima.probabilidadLluvia }}%</p>
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>
      <div style="width:100%; max-width:600px; margin:auto; padding-top: 20px;">
        <canvas id="graficoLluvia"></canvas>
      </div>
    </ion-card-content>
  </ion-card>
</ion-content>